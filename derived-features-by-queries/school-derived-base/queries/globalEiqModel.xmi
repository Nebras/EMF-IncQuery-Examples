<?xml version="1.0" encoding="ASCII"?>
<eMFPatternLanguage:PatternModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eMFPatternLanguage="http://www.eclipse.org/viatra2/patternlanguage/EMFPatternLanguage" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" xmlns:patternLanguage="http://www.eclipse.org/viatra2/patternlanguage/core/PatternLanguage" xmlns:types="http://www.eclipse.org/xtext/common/JavaVMTypes" xmlns:xbase="http://www.eclipse.org/xtext/xbase/Xbase">
  <patterns name="teachers" fileName="platform:/resource/school-derived-base/src/school-derived-base.eiq">
    <parameters name="School">
      <type xsi:type="eMFPatternLanguage:ClassType">
        <classname xsi:type="ecore:EClass" href="http:///school.ecore#//School"/>
      </type>
    </parameters>
    <parameters name="Teacher">
      <type xsi:type="eMFPatternLanguage:ClassType">
        <classname xsi:type="ecore:EClass" href="http:///school.ecore#//Teacher"/>
      </type>
    </parameters>
    <bodies>
      <constraints xsi:type="patternLanguage:PathExpressionConstraint">
        <head>
          <type xsi:type="eMFPatternLanguage:ClassType">
            <classname xsi:type="ecore:EClass" href="http:///school.ecore#//School"/>
          </type>
          <tail>
            <type xsi:type="eMFPatternLanguage:ReferenceType">
              <refname xsi:type="ecore:EReference" href="http:///school.ecore#//School/teachers"/>
            </type>
          </tail>
          <src var="School"/>
          <dst xsi:type="patternLanguage:VariableValue">
            <value var="Teacher"/>
          </dst>
        </head>
      </constraints>
    </bodies>
  </patterns>
  <patterns name="coursesOfTeacher" fileName="platform:/resource/school-derived-base/src/school-derived-base.eiq">
    <parameters name="Teacher">
      <type xsi:type="eMFPatternLanguage:ClassType">
        <classname xsi:type="ecore:EClass" href="http:///school.ecore#//Teacher"/>
      </type>
    </parameters>
    <parameters name="Course">
      <type xsi:type="eMFPatternLanguage:ClassType">
        <classname xsi:type="ecore:EClass" href="http:///school.ecore#//Course"/>
      </type>
    </parameters>
    <bodies>
      <constraints xsi:type="patternLanguage:PathExpressionConstraint">
        <head>
          <type xsi:type="eMFPatternLanguage:ClassType">
            <classname xsi:type="ecore:EClass" href="http:///school.ecore#//Teacher"/>
          </type>
          <tail>
            <type xsi:type="eMFPatternLanguage:ReferenceType">
              <refname xsi:type="ecore:EReference" href="http:///school.ecore#//Teacher/courses"/>
            </type>
          </tail>
          <src var="Teacher"/>
          <dst xsi:type="patternLanguage:VariableValue">
            <value var="Course"/>
          </dst>
        </head>
      </constraints>
    </bodies>
  </patterns>
  <patterns name="teacherWithMostCourses" fileName="platform:/resource/school-derived-base/src/school-derived-base.eiq">
    <parameters name="School">
      <type xsi:type="eMFPatternLanguage:ClassType">
        <classname xsi:type="ecore:EClass" href="http:///school.ecore#//School"/>
      </type>
    </parameters>
    <parameters name="Teacher">
      <type xsi:type="eMFPatternLanguage:ClassType">
        <classname xsi:type="ecore:EClass" href="http:///school.ecore#//Teacher"/>
      </type>
    </parameters>
    <bodies>
      <constraints xsi:type="patternLanguage:PatternCompositionConstraint">
        <call patternRef="//@patterns.0">
          <parameters xsi:type="patternLanguage:VariableValue">
            <value var="School"/>
          </parameters>
          <parameters xsi:type="patternLanguage:VariableValue">
            <value var="Teacher"/>
          </parameters>
        </call>
      </constraints>
      <constraints xsi:type="patternLanguage:PatternCompositionConstraint" negative="true">
        <call patternRef="//@patterns.3">
          <parameters xsi:type="patternLanguage:VariableValue">
            <value var="Teacher"/>
          </parameters>
        </call>
      </constraints>
    </bodies>
  </patterns>
  <patterns name="moreCourses" fileName="platform:/resource/school-derived-base/src/school-derived-base.eiq">
    <parameters name="Teacher">
      <type xsi:type="eMFPatternLanguage:ClassType">
        <classname xsi:type="ecore:EClass" href="http:///school.ecore#//Teacher"/>
      </type>
    </parameters>
    <bodies>
      <constraints xsi:type="patternLanguage:CompareConstraint">
        <leftOperand xsi:type="patternLanguage:VariableValue">
          <value var="N"/>
        </leftOperand>
        <rightOperand xsi:type="patternLanguage:AggregatedValue">
          <aggregator xsi:type="patternLanguage:CountAggregator"/>
          <call patternRef="//@patterns.1">
            <parameters xsi:type="patternLanguage:VariableValue">
              <value var="Teacher"/>
            </parameters>
            <parameters xsi:type="patternLanguage:VariableValue">
              <value var="Course"/>
            </parameters>
          </call>
        </rightOperand>
      </constraints>
      <constraints xsi:type="patternLanguage:CompareConstraint">
        <leftOperand xsi:type="patternLanguage:VariableValue">
          <value var="M"/>
        </leftOperand>
        <rightOperand xsi:type="patternLanguage:AggregatedValue">
          <aggregator xsi:type="patternLanguage:CountAggregator"/>
          <call patternRef="//@patterns.1">
            <parameters xsi:type="patternLanguage:VariableValue">
              <value var="Teacher2"/>
            </parameters>
            <parameters xsi:type="patternLanguage:VariableValue">
              <value var="Course2"/>
            </parameters>
          </call>
        </rightOperand>
      </constraints>
      <constraints xsi:type="eMFPatternLanguage:EClassifierConstraint">
        <type xsi:type="eMFPatternLanguage:ClassType">
          <classname xsi:type="ecore:EClass" href="http:///school.ecore#//Teacher"/>
        </type>
        <var var="Teacher2"/>
      </constraints>
      <constraints xsi:type="patternLanguage:CompareConstraint" feature="!=">
        <leftOperand xsi:type="patternLanguage:VariableValue">
          <value var="Teacher"/>
        </leftOperand>
        <rightOperand xsi:type="patternLanguage:VariableValue">
          <value var="Teacher2"/>
        </rightOperand>
      </constraints>
      <constraints xsi:type="patternLanguage:CheckConstraint">
        <expression xsi:type="xbase:XBinaryOperation">
          <feature xsi:type="types:JvmOperation" href="java:/Objects/org.eclipse.xtext.xbase.lib.ComparableExtensions#org.eclipse.xtext.xbase.lib.ComparableExtensions.operator_lessThan(java.lang.Comparable,C)"/>
          <leftOperand xsi:type="xbase:XCastedExpression">
            <type xsi:type="types:JvmParameterizedTypeReference">
              <type xsi:type="types:JvmGenericType" href="java:/Objects/java.lang.Integer#java.lang.Integer"/>
            </type>
            <target xsi:type="xbase:XFeatureCall" feature="//@patterns.3/@bodies.0/@variables.2"/>
          </leftOperand>
          <rightOperand xsi:type="xbase:XCastedExpression">
            <type xsi:type="types:JvmParameterizedTypeReference">
              <type xsi:type="types:JvmGenericType" href="java:/Objects/java.lang.Integer#java.lang.Integer"/>
            </type>
            <target xsi:type="xbase:XFeatureCall" feature="//@patterns.3/@bodies.0/@variables.1"/>
          </rightOperand>
        </expression>
      </constraints>
    </bodies>
  </patterns>
  <patterns name="lastYear" fileName="platform:/resource/school-derived-base/src/school-derived-base.eiq">
    <parameters name="School">
      <type xsi:type="eMFPatternLanguage:ClassType">
        <classname xsi:type="ecore:EClass" href="http:///school.ecore#//School"/>
      </type>
    </parameters>
    <parameters name="Year">
      <type xsi:type="eMFPatternLanguage:ClassType">
        <classname xsi:type="ecore:EClass" href="http:///school.ecore#//Year"/>
      </type>
    </parameters>
    <bodies>
      <constraints xsi:type="patternLanguage:PathExpressionConstraint">
        <head>
          <type xsi:type="eMFPatternLanguage:ClassType">
            <classname xsi:type="ecore:EClass" href="http:///school.ecore#//School"/>
          </type>
          <tail>
            <type xsi:type="eMFPatternLanguage:ReferenceType">
              <refname xsi:type="ecore:EReference" href="http:///school.ecore#//School/years"/>
            </type>
          </tail>
          <src var="School"/>
          <dst xsi:type="patternLanguage:VariableValue">
            <value var="Year"/>
          </dst>
        </head>
      </constraints>
      <constraints xsi:type="patternLanguage:PatternCompositionConstraint" negative="true">
        <call patternRef="//@patterns.5">
          <parameters xsi:type="patternLanguage:VariableValue">
            <value var="Year"/>
          </parameters>
        </call>
      </constraints>
    </bodies>
  </patterns>
  <patterns name="laterYear" fileName="platform:/resource/school-derived-base/src/school-derived-base.eiq">
    <parameters name="Year">
      <type xsi:type="eMFPatternLanguage:ClassType">
        <classname xsi:type="ecore:EClass" href="http:///school.ecore#//Year"/>
      </type>
    </parameters>
    <bodies>
      <constraints xsi:type="patternLanguage:PathExpressionConstraint">
        <head>
          <type xsi:type="eMFPatternLanguage:ClassType">
            <classname xsi:type="ecore:EClass" href="http:///school.ecore#//Year"/>
          </type>
          <tail>
            <type xsi:type="eMFPatternLanguage:ReferenceType">
              <refname xsi:type="ecore:EAttribute" href="http:///school.ecore#//Year/startingDate"/>
            </type>
          </tail>
          <src var="Year"/>
          <dst xsi:type="patternLanguage:VariableValue">
            <value var="Date"/>
          </dst>
        </head>
      </constraints>
      <constraints xsi:type="patternLanguage:PathExpressionConstraint">
        <head>
          <type xsi:type="eMFPatternLanguage:ClassType">
            <classname xsi:type="ecore:EClass" href="http:///school.ecore#//Year"/>
          </type>
          <tail>
            <type xsi:type="eMFPatternLanguage:ReferenceType">
              <refname xsi:type="ecore:EAttribute" href="http:///school.ecore#//Year/startingDate"/>
            </type>
          </tail>
          <src var="Year2"/>
          <dst xsi:type="patternLanguage:VariableValue">
            <value var="Date2"/>
          </dst>
        </head>
      </constraints>
      <constraints xsi:type="eMFPatternLanguage:EClassifierConstraint">
        <type xsi:type="eMFPatternLanguage:ClassType">
          <classname xsi:type="ecore:EClass" href="http:///school.ecore#//Year"/>
        </type>
        <var var="Year2"/>
      </constraints>
      <constraints xsi:type="patternLanguage:CompareConstraint" feature="!=">
        <leftOperand xsi:type="patternLanguage:VariableValue">
          <value var="Year"/>
        </leftOperand>
        <rightOperand xsi:type="patternLanguage:VariableValue">
          <value var="Year2"/>
        </rightOperand>
      </constraints>
      <constraints xsi:type="patternLanguage:CheckConstraint">
        <expression xsi:type="xbase:XBinaryOperation">
          <feature xsi:type="types:JvmOperation" href="java:/Objects/org.eclipse.xtext.xbase.lib.ComparableExtensions#org.eclipse.xtext.xbase.lib.ComparableExtensions.operator_lessThan(java.lang.Comparable,C)"/>
          <leftOperand xsi:type="xbase:XCastedExpression">
            <type xsi:type="types:JvmParameterizedTypeReference">
              <type xsi:type="types:JvmGenericType" href="java:/Objects/java.lang.Integer#java.lang.Integer"/>
            </type>
            <target xsi:type="xbase:XFeatureCall" feature="//@patterns.5/@bodies.0/@variables.0"/>
          </leftOperand>
          <rightOperand xsi:type="xbase:XCastedExpression">
            <type xsi:type="types:JvmParameterizedTypeReference">
              <type xsi:type="types:JvmGenericType" href="java:/Objects/java.lang.Integer#java.lang.Integer"/>
            </type>
            <target xsi:type="xbase:XFeatureCall" feature="//@patterns.5/@bodies.0/@variables.1"/>
          </rightOperand>
        </expression>
      </constraints>
    </bodies>
  </patterns>
  <importPackages/>
</eMFPatternLanguage:PatternModel>
